{% extends "Polls/base.html" %}

{% block content %}
<div class="container mt-5 col-md-6">

  <h2 class="mb-4" style="color: #8d7caf;">Вход</h2>

  {% if error %}
    <div style="background-color: #f3e8ff; border: 2px solid #8d7caf; border-radius: 10px; padding: 15px; color: #8d7caf; font-weight: 500; margin-bottom: 20px;">
      {{ error }}
    </div>
  {% endif %}

  <form method="post">
    {% csrf_token %}
    {% for field in form %}
      <div class="mb-4">
        {{ field.label_tag }}
        {{ field }}
        {% if field.errors %}
          <div class="text-danger small">{{ field.errors|striptags }}</div>
        {% endif %}
      </div>
    {% endfor %}

    <button type="submit" class="btn btn-purple" style="background-color: #8d7caf !important; color: white !important; border: none !important;">Войти</button>
  </form>

  <p class="mt-3">
    Нет аккаунта? 
    <a href="{% url 'register' %}" class="registr_button" style="color: #8d7caf; font-weight: 600;">Зарегистрироваться</a>
  </p>
</div>

<script>
  document.querySelectorAll('form input, form select, form textarea').forEach(el => {
    // Добавлять modal_input только, если поле внутри формы на странице (а не в шапке)
    if (!el.closest('nav')) {
      el.classList.add('modal_input');
    }
  });
</script>
{% endblock %}